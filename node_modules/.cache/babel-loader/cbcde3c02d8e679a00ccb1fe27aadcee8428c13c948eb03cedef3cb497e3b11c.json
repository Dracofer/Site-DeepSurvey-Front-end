{"ast":null,"code":"import axios from \"axios\";\n\n// URL do backend\nconst API = process.env.REACT_APP_API_URL || \"http://localhost:8083\";\n\n// cria a instÃ¢ncia axios\nconst api = axios.create({\n  baseURL: API\n});\n\n// ------------------------------\n// ðŸ”¥ 1. GERAR / RECUPERAR SESSION ID (Carrinho)\n// ------------------------------\nlet sessionId = localStorage.getItem(\"sessionId\");\nif (!sessionId) {\n  sessionId = crypto.randomUUID();\n  localStorage.setItem(\"sessionId\", sessionId);\n}\n\n// ------------------------------\n// ðŸ”¥ 2. INTERCEPTOR QUE ENVIA sessionId + token JWT EM TODAS AS REQUISIÃ‡Ã•ES\n// ------------------------------\napi.interceptors.request.use(config => {\n  // SESSION ID\n  config.headers[\"X-Session-Id\"] = sessionId;\n\n  // TOKEN JWT\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers.Authorization = \"Bearer \" + token;\n  }\n  return config;\n});\n\n// ------------------------------\n// ðŸ”¥ 3. FunÃ§Ã£o manual (ainda Ãºtil)\n// ------------------------------\nexport function setAuthToken(token) {\n  if (token) {\n    api.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n  } else {\n    delete api.defaults.headers.common[\"Authorization\"];\n  }\n}\nexport default api;","map":{"version":3,"names":["axios","API","process","env","REACT_APP_API_URL","api","create","baseURL","sessionId","localStorage","getItem","crypto","randomUUID","setItem","interceptors","request","use","config","headers","token","Authorization","setAuthToken","defaults","common"],"sources":["C:/Users/ruan2/Desktop/Nova pasta (12)/src/api.js"],"sourcesContent":["import axios from \"axios\";\n\n// URL do backend\nconst API = process.env.REACT_APP_API_URL || \"http://localhost:8083\";\n\n// cria a instÃ¢ncia axios\nconst api = axios.create({ baseURL: API });\n\n// ------------------------------\n// ðŸ”¥ 1. GERAR / RECUPERAR SESSION ID (Carrinho)\n// ------------------------------\nlet sessionId = localStorage.getItem(\"sessionId\");\n\nif (!sessionId) {\n  sessionId = crypto.randomUUID();\n  localStorage.setItem(\"sessionId\", sessionId);\n}\n\n// ------------------------------\n// ðŸ”¥ 2. INTERCEPTOR QUE ENVIA sessionId + token JWT EM TODAS AS REQUISIÃ‡Ã•ES\n// ------------------------------\napi.interceptors.request.use((config) => {\n  // SESSION ID\n  config.headers[\"X-Session-Id\"] = sessionId;\n\n  // TOKEN JWT\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers.Authorization = \"Bearer \" + token;\n  }\n\n  return config;\n});\n\n// ------------------------------\n// ðŸ”¥ 3. FunÃ§Ã£o manual (ainda Ãºtil)\n// ------------------------------\nexport function setAuthToken(token) {\n  if (token) {\n    api.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n  } else {\n    delete api.defaults.headers.common[\"Authorization\"];\n  }\n}\n\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;;AAEpE;AACA,MAAMC,GAAG,GAAGL,KAAK,CAACM,MAAM,CAAC;EAAEC,OAAO,EAAEN;AAAI,CAAC,CAAC;;AAE1C;AACA;AACA;AACA,IAAIO,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;AAEjD,IAAI,CAACF,SAAS,EAAE;EACdA,SAAS,GAAGG,MAAM,CAACC,UAAU,CAAC,CAAC;EAC/BH,YAAY,CAACI,OAAO,CAAC,WAAW,EAAEL,SAAS,CAAC;AAC9C;;AAEA;AACA;AACA;AACAH,GAAG,CAACS,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACvC;EACAA,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,GAAGV,SAAS;;EAE1C;EACA,MAAMW,KAAK,GAAGV,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIS,KAAK,EAAE;IACTF,MAAM,CAACC,OAAO,CAACE,aAAa,GAAG,SAAS,GAAGD,KAAK;EAClD;EAEA,OAAOF,MAAM;AACf,CAAC,CAAC;;AAEF;AACA;AACA;AACA,OAAO,SAASI,YAAYA,CAACF,KAAK,EAAE;EAClC,IAAIA,KAAK,EAAE;IACTd,GAAG,CAACiB,QAAQ,CAACJ,OAAO,CAACK,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGJ,KAAK;EAClE,CAAC,MAAM;IACL,OAAOd,GAAG,CAACiB,QAAQ,CAACJ,OAAO,CAACK,MAAM,CAAC,eAAe,CAAC;EACrD;AACF;AAEA,eAAelB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
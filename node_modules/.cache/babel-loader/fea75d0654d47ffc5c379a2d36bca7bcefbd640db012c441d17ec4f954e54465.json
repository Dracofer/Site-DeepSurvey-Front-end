{"ast":null,"code":"import axios from \"axios\";\nconst API = process.env.REACT_APP_API_URL || \"http://localhost:8083\";\nconst api = axios.create({\n  baseURL: API\n});\n\n/* -------------------------------\n   ðŸ”¥ SESSÃƒO DA SACOLA\n--------------------------------*/\nlet sessionId = localStorage.getItem(\"sessionId\");\nif (!sessionId) {\n  sessionId = crypto.randomUUID();\n  localStorage.setItem(\"sessionId\", sessionId);\n}\napi.interceptors.request.use(config => {\n  config.headers[\"X-Session-Id\"] = sessionId;\n\n  // garante que o token sempre siga junto\n  const savedToken = localStorage.getItem(\"token\");\n  if (savedToken) {\n    config.headers[\"Authorization\"] = \"Bearer \" + savedToken;\n  }\n  return config;\n});\n\n/* -------------------------------\n   ðŸ”¥ FunÃ§Ã£o para definir/remover TOKEN \n--------------------------------*/\nexport function setAuthToken(token) {\n  if (token) {\n    localStorage.setItem(\"token\", token);\n    api.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n  } else {\n    localStorage.removeItem(\"token\");\n    delete api.defaults.headers.common[\"Authorization\"];\n  }\n}\n\n/* -------------------------------\n   ðŸ”¥ Ao carregar a pÃ¡gina, aplica o token salvo\n--------------------------------*/\nconst savedTokenAtLoad = localStorage.getItem(\"token\");\nif (savedTokenAtLoad) {\n  api.defaults.headers.common[\"Authorization\"] = \"Bearer \" + savedTokenAtLoad;\n}\nexport default api;","map":{"version":3,"names":["axios","API","process","env","REACT_APP_API_URL","api","create","baseURL","sessionId","localStorage","getItem","crypto","randomUUID","setItem","interceptors","request","use","config","headers","savedToken","setAuthToken","token","defaults","common","removeItem","savedTokenAtLoad"],"sources":["C:/Users/ruan2/Desktop/Nova pasta (12)/src/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API = process.env.REACT_APP_API_URL || \"http://localhost:8083\";\n\nconst api = axios.create({ baseURL: API });\n\n/* -------------------------------\n   ðŸ”¥ SESSÃƒO DA SACOLA\n--------------------------------*/\nlet sessionId = localStorage.getItem(\"sessionId\");\nif (!sessionId) {\n  sessionId = crypto.randomUUID();\n  localStorage.setItem(\"sessionId\", sessionId);\n}\n\napi.interceptors.request.use((config) => {\n  config.headers[\"X-Session-Id\"] = sessionId;\n\n  // garante que o token sempre siga junto\n  const savedToken = localStorage.getItem(\"token\");\n  if (savedToken) {\n    config.headers[\"Authorization\"] = \"Bearer \" + savedToken;\n  }\n\n  return config;\n});\n\n/* -------------------------------\n   ðŸ”¥ FunÃ§Ã£o para definir/remover TOKEN \n--------------------------------*/\nexport function setAuthToken(token) {\n  if (token) {\n    localStorage.setItem(\"token\", token);\n    api.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n  } else {\n    localStorage.removeItem(\"token\");\n    delete api.defaults.headers.common[\"Authorization\"];\n  }\n}\n\n/* -------------------------------\n   ðŸ”¥ Ao carregar a pÃ¡gina, aplica o token salvo\n--------------------------------*/\nconst savedTokenAtLoad = localStorage.getItem(\"token\");\nif (savedTokenAtLoad) {\n  api.defaults.headers.common[\"Authorization\"] = \"Bearer \" + savedTokenAtLoad;\n}\n\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAEpE,MAAMC,GAAG,GAAGL,KAAK,CAACM,MAAM,CAAC;EAAEC,OAAO,EAAEN;AAAI,CAAC,CAAC;;AAE1C;AACA;AACA;AACA,IAAIO,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;AACjD,IAAI,CAACF,SAAS,EAAE;EACdA,SAAS,GAAGG,MAAM,CAACC,UAAU,CAAC,CAAC;EAC/BH,YAAY,CAACI,OAAO,CAAC,WAAW,EAAEL,SAAS,CAAC;AAC9C;AAEAH,GAAG,CAACS,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACvCA,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,GAAGV,SAAS;;EAE1C;EACA,MAAMW,UAAU,GAAGV,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAChD,IAAIS,UAAU,EAAE;IACdF,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGC,UAAU;EAC1D;EAEA,OAAOF,MAAM;AACf,CAAC,CAAC;;AAEF;AACA;AACA;AACA,OAAO,SAASG,YAAYA,CAACC,KAAK,EAAE;EAClC,IAAIA,KAAK,EAAE;IACTZ,YAAY,CAACI,OAAO,CAAC,OAAO,EAAEQ,KAAK,CAAC;IACpChB,GAAG,CAACiB,QAAQ,CAACJ,OAAO,CAACK,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGF,KAAK;EAClE,CAAC,MAAM;IACLZ,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;IAChC,OAAOnB,GAAG,CAACiB,QAAQ,CAACJ,OAAO,CAACK,MAAM,CAAC,eAAe,CAAC;EACrD;AACF;;AAEA;AACA;AACA;AACA,MAAME,gBAAgB,GAAGhB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AACtD,IAAIe,gBAAgB,EAAE;EACpBpB,GAAG,CAACiB,QAAQ,CAACJ,OAAO,CAACK,MAAM,CAAC,eAAe,CAAC,GAAG,SAAS,GAAGE,gBAAgB;AAC7E;AAEA,eAAepB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}